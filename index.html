<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QWIKKEN — Project Overview</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:          #0f172a;
      --surface:     #0f172a;
      --card:        #1e293b;
      --card-hov:    #253347;
      --border:      rgba(255,255,255,0.08);
      --border2:     rgba(255,255,255,0.15);
      --sky:         #06b6d4;
      --cyan:        #00d4ff;
      --rose:        #f43f5e;
      --blue:        #3b82f6;
      --emerald:     #10b981;
      --violet:      #8b5cf6;
      --amber:       #f59e0b;
      --indigo:      #6366f1;
      --text:        #ffffff;
      --muted:       #cbd5e1;
      --sidebar-w:   240px;
      --ai-panel-w:  360px;
    }

    html, body { height: 100%; overflow: hidden; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      display: flex;
      height: 100vh;
    }

    /* ── SCROLLBARS ── */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #475569; }

    /* ── SIDEBAR ── */
    .sidebar {
      width: var(--sidebar-w);
      flex-shrink: 0;
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow-y: auto;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 18px 14px 16px;
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }

    .logo-icon {
      width: 34px; height: 34px;
      background: linear-gradient(135deg, var(--sky), #0077aa);
      border-radius: 9px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700; font-size: 15px;
      color: #fff; flex-shrink: 0;
    }

    .logo-name {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700; font-size: 13px;
      color: #fff; letter-spacing: .04em;
    }

    .logo-sub {
      font-size: 9px; color: var(--sky);
      font-weight: 600; letter-spacing: .08em;
      text-transform: uppercase;
    }

    .nav { padding: 8px 0; flex: 1; }

    .nav-section {
      font-size: 10px; font-weight: 700;
      letter-spacing: .10em; text-transform: uppercase;
      padding: 14px 14px 5px;
    }

    .nav-item {
      display: flex; align-items: center; gap: 8px;
      padding: 7px 14px;
      font-size: 12px; color: #64748b;
      cursor: pointer;
      border-left: 3px solid transparent;
      transition: all .15s;
      border-radius: 0 6px 6px 0;
      margin-right: 6px;
    }

    .nav-item:hover { color: #e2e8f0; background: rgba(255,255,255,.04); }

    .nav-item.active {
      color: #fff;
      border-left-color: var(--sky);
      background: rgba(6,182,212,.07);
    }

    .nav-num {
      font-size: 10px; font-weight: 600;
      color: inherit; opacity: .5;
      width: 16px; flex-shrink: 0;
    }

    .sidebar-footer {
      padding: 14px; border-top: 1px solid var(--border);
      font-size: 10px; color: #475569; flex-shrink: 0;
    }

    .sidebar-footer span { color: var(--sky); }

    /* ── MAIN (center column) ── */
    .main {
      flex: 1;
      min-width: 0;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* ── TOPBAR ── */
    .topbar {
      padding: 16px 28px 14px;
      border-bottom: 1px solid var(--border);
      background: var(--bg);
      flex-shrink: 0;
    }

    .topbar-row {
      display: flex; align-items: center;
      justify-content: space-between; gap: 12px;
    }

    .breadcrumb {
      display: flex; align-items: center;
      gap: 8px; margin-bottom: 8px;
    }

    .breadcrumb-tag {
      background: rgba(6,182,212,.12);
      border: 1px solid rgba(6,182,212,.25);
      color: var(--sky);
      font-size: 9px; font-weight: 700;
      letter-spacing: .08em; text-transform: uppercase;
      padding: 3px 9px; border-radius: 5px;
    }

    .breadcrumb-sep { color: #475569; font-size: 11px; }
    .breadcrumb-text { font-size: 12px; color: #64748b; }

    .topbar h1 {
      font-family: 'Cinzel', serif;
      font-size: 1.6rem; font-weight: 700;
      color: #fff; letter-spacing: .02em; line-height: 1.1;
    }

    .topbar-sub {
      font-size: 12px; color: #64748b; margin-top: 2px;
    }

    .ai-toggle-btn {
      display: flex; align-items: center; gap: 7px;
      background: linear-gradient(135deg, rgba(6,182,212,.12), rgba(59,130,246,.12));
      border: 1px solid rgba(6,182,212,.28);
      border-radius: 9px;
      color: var(--sky);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 12px; font-weight: 600;
      padding: 8px 14px;
      cursor: pointer; transition: all .15s;
      letter-spacing: .02em; flex-shrink: 0; white-space: nowrap;
    }

    .ai-toggle-btn:hover {
      background: linear-gradient(135deg, rgba(6,182,212,.2), rgba(59,130,246,.2));
      border-color: rgba(6,182,212,.5);
    }

    .ai-toggle-btn.active {
      background: rgba(6,182,212,.16);
      border-color: var(--sky);
    }

    /* ── CONTENT ── */
    .content {
      flex: 1;
      overflow-y: auto;
      padding: 22px 28px 48px;
    }

    /* ── SECTION HEADER ── */
    .section-header {
      display: flex; align-items: center;
      gap: 10px; margin-bottom: 14px; margin-top: 28px;
    }

    .section-header:first-child { margin-top: 0; }

    .section-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }

    .section-label {
      font-size: 10px; font-weight: 700;
      letter-spacing: .10em; text-transform: uppercase;
    }

    .section-line { flex: 1; height: 1px; background: var(--border); }

    /* ── CARD GRID ── */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px; margin-bottom: 6px;
    }

    @media (max-width: 1100px) { .card-grid { grid-template-columns: repeat(2, 1fr); } }

    /* ── CARD ── */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      position: relative;
      cursor: pointer;
      transition: background .18s, border-color .18s, transform .18s, box-shadow .18s;
      box-shadow: 0 8px 12px -3px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .card:hover {
      background: var(--card-hov);
      border-color: var(--border2);
      transform: translateY(-2px);
      box-shadow: 0 14px 20px -4px rgba(0,0,0,0.4);
    }

    .card::after {
      content: '';
      position: absolute;
      top: -8px; right: -8px;
      width: 64px; height: 64px;
      border-radius: 50%;
      opacity: 0.07;
      transition: transform .3s;
      pointer-events: none;
    }

    .card:hover::after { transform: scale(1.6); }

    .card:has(.num-sky)::after    { background: var(--sky); }
    .card:has(.num-cyan)::after   { background: var(--cyan); }
    .card:has(.num-rose)::after   { background: var(--rose); }
    .card:has(.num-blue)::after   { background: var(--blue); }
    .card:has(.num-emerald)::after{ background: var(--emerald); }
    .card:has(.num-violet)::after { background: var(--violet); }
    .card:has(.num-amber)::after  { background: var(--amber); }
    .card:has(.num-indigo)::after { background: var(--indigo); }

    .card-top {
      display: flex; justify-content: space-between;
      align-items: flex-start; margin-bottom: 12px;
    }

    .card-num {
      width: 34px; height: 34px;
      border-radius: 9px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px; font-weight: 700;
      color: #fff; flex-shrink: 0;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
    }

    .card-tag {
      font-size: 8px; font-weight: 700;
      letter-spacing: .08em; text-transform: uppercase;
      padding: 3px 7px; border-radius: 4px; border: 1px solid;
    }

    .tag-strategy { background: rgba(6,182,212,.10);  border-color: rgba(6,182,212,.3);  color: var(--sky); }
    .tag-core     { background: rgba(0,212,255,.10);   border-color: rgba(0,212,255,.3);  color: var(--cyan); }
    .tag-engine   { background: rgba(16,185,129,.10);  border-color: rgba(16,185,129,.3); color: var(--emerald); }
    .tag-key      { background: rgba(245,158,11,.10);  border-color: rgba(245,158,11,.3); color: var(--amber); }
    .tag-moat     { background: rgba(139,92,246,.10);  border-color: rgba(139,92,246,.3); color: var(--violet); }
    .tag-market   { background: rgba(59,130,246,.10);  border-color: rgba(59,130,246,.3); color: var(--blue); }
    .tag-ip       { background: rgba(245,158,11,.10);  border-color: rgba(245,158,11,.3); color: var(--amber); }
    .tag-arch     { background: rgba(139,92,246,.10);  border-color: rgba(139,92,246,.3); color: var(--violet); }
    .tag-platform { background: rgba(16,185,129,.10);  border-color: rgba(16,185,129,.3); color: var(--emerald); }
    .tag-indigo   { background: rgba(99,102,241,.10);  border-color: rgba(99,102,241,.3); color: var(--indigo); }
    .tag-scale    { background: rgba(244,63,94,.10);   border-color: rgba(244,63,94,.3);  color: var(--rose); }
    .tag-finops   { background: rgba(16,185,129,.10);  border-color: rgba(16,185,129,.3); color: var(--emerald); }
    .tag-forever  { background: rgba(59,130,246,.10);  border-color: rgba(59,130,246,.3); color: var(--blue); }
    .tag-diff     { background: rgba(244,63,94,.10);   border-color: rgba(244,63,94,.3);  color: var(--rose); }

    .card h3 {
      font-family: 'Cinzel', serif;
      font-size: 16px; font-weight: 700;
      color: #fff; line-height: 1.3;
      margin-bottom: 10px; letter-spacing: .02em;
    }

    .card p {
      font-size: 13px; color: #94a3b8; line-height: 1.6;
    }

    .num-sky     { background: rgba(6,182,212,.18);   color: var(--sky); }
    .num-cyan    { background: rgba(0,212,255,.18);   color: var(--cyan); }
    .num-rose    { background: rgba(244,63,94,.18);   color: var(--rose); }
    .num-blue    { background: rgba(59,130,246,.18);  color: var(--blue); }
    .num-emerald { background: rgba(16,185,129,.18);  color: var(--emerald); }
    .num-violet  { background: rgba(139,92,246,.18);  color: var(--violet); }
    .num-amber   { background: rgba(245,158,11,.18);  color: var(--amber); }
    .num-indigo  { background: rgba(99,102,241,.18);  color: var(--indigo); }

    /* ── AI PANEL — permanent right sidebar ── */
    .ai-panel {
      width: var(--ai-panel-w);
      flex-shrink: 0;
      background: #0b1120;
      border-left: 1px solid rgba(6,182,212,.18);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      transition: width .28s cubic-bezier(.4,0,.2,1);
    }

    .ai-panel.collapsed  { width: 0; }
    .ai-panel.expanded   { width: 640px; }

    .ai-panel-header {
      padding: 16px 14px 12px;
      border-bottom: 1px solid rgba(255,255,255,.07);
      display: flex; align-items: center; gap: 10px;
      flex-shrink: 0;
    }

    .ai-panel-icon {
      width: 30px; height: 30px;
      background: linear-gradient(135deg, var(--sky), #0077aa);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 13px; color: #fff; flex-shrink: 0;
    }

    .ai-panel-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px; font-weight: 700; color: #fff;
    }

    .ai-panel-sub { font-size: 10px; color: #475569; }

    .ai-panel-close {
      margin-left: auto;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #64748b;
      width: 26px; height: 26px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all .15s; font-size: 11px;
      flex-shrink: 0;
    }

    .ai-panel-close:hover { background: rgba(255,255,255,.12); color: #fff; }

    .ai-model-bar {
      padding: 8px 12px;
      border-bottom: 1px solid rgba(255,255,255,.05);
      display: flex; align-items: center; gap: 7px; flex-shrink: 0;
    }

    .ai-model-label { font-size: 10px; color: #475569; flex-shrink: 0; }

    .ai-model-select {
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #cbd5e1;
      font-size: 11px; font-family: 'Inter', sans-serif;
      padding: 4px 8px; cursor: pointer; outline: none; flex: 1;
    }

    .ai-model-select:focus { border-color: rgba(6,182,212,.4); }

    .ai-key-btn {
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #64748b;
      font-size: 11px; padding: 4px 8px;
      cursor: pointer; transition: all .15s;
    }

    .ai-key-btn:hover { color: #94a3b8; border-color: rgba(255,255,255,.2); }

    .ai-messages {
      flex: 1; overflow-y: auto;
      padding: 14px;
      display: flex; flex-direction: column; gap: 12px;
    }

    .ai-empty {
      flex: 1;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 10px; color: #334155; text-align: center;
      padding: 20px 14px; pointer-events: none;
    }

    .ai-empty-icon { font-size: 28px; opacity: .3; }
    .ai-empty-text { font-size: 11px; line-height: 1.6; }

    .ai-msg { display: flex; gap: 8px; align-items: flex-start; }
    .ai-msg.user { flex-direction: row-reverse; }

    .ai-msg-avatar {
      width: 24px; height: 24px;
      border-radius: 7px;
      display: flex; align-items: center; justify-content: center;
      font-size: 11px; flex-shrink: 0; margin-top: 2px;
    }

    .ai-msg.user .ai-msg-avatar { background: rgba(59,130,246,.2); color: var(--blue); }
    .ai-msg.assistant .ai-msg-avatar {
      background: linear-gradient(135deg, rgba(6,182,212,.22), rgba(0,119,170,.22));
      color: var(--sky);
    }

    .ai-msg-bubble {
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 10px;
      padding: 9px 12px;
      font-size: 12px; line-height: 1.65;
      color: #cbd5e1;
      max-width: calc(100% - 36px);
      word-break: break-word;
    }

    .ai-msg.user .ai-msg-bubble {
      background: rgba(59,130,246,.1);
      border-color: rgba(59,130,246,.18);
      color: #e2e8f0;
    }

    .ai-msg.assistant .ai-msg-bubble strong { color: #fff; }

    .ai-input-area {
      padding: 12px 12px 14px;
      border-top: 1px solid rgba(255,255,255,.07);
      flex-shrink: 0;
    }

    .ai-textarea-wrap {
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 10px;
      padding: 10px 12px 8px;
      display: flex; flex-direction: column; gap: 8px;
      transition: border-color .15s;
    }

    .ai-textarea-wrap:focus-within { border-color: rgba(6,182,212,.35); }

    .ai-textarea {
      background: transparent; border: none;
      color: #e2e8f0;
      font-family: 'Inter', sans-serif;
      font-size: 12px; line-height: 1.5;
      resize: none; outline: none;
      min-height: 52px; max-height: 120px; width: 100%;
    }

    .ai-textarea::placeholder { color: #3d4f6b; }

    .ai-textarea-actions {
      display: flex; align-items: center;
      justify-content: space-between;
    }

    .ai-hint-text { font-size: 10px; color: #2d3748; }

    .ai-send-btn {
      display: flex; align-items: center; gap: 5px;
      background: linear-gradient(135deg, var(--sky), #0077aa);
      border: none; border-radius: 7px;
      color: #fff;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px; font-weight: 700;
      padding: 7px 13px;
      cursor: pointer; transition: opacity .15s, transform .15s;
      letter-spacing: .02em;
    }

    .ai-send-btn:hover { opacity: .85; transform: translateY(-1px); }
    .ai-send-btn:disabled { opacity: .35; cursor: not-allowed; transform: none; }

    .ai-stop-btn {
      display: none; align-items: center; gap: 5px;
      background: rgba(244,63,94,.14);
      border: 1px solid rgba(244,63,94,.32);
      border-radius: 7px; color: var(--rose);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px; font-weight: 700;
      padding: 7px 13px; cursor: pointer;
      transition: background .15s; letter-spacing: .02em;
    }
    .ai-stop-btn:hover { background: rgba(244,63,94,.25); }

    .ai-panel-expand {
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #64748b;
      width: 26px; height: 26px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all .15s; font-size: 11px;
      flex-shrink: 0;
    }
    .ai-panel-expand:hover { background: rgba(255,255,255,.12); color: #fff; }

    /* Markdown rendering inside AI bubbles */
    .ai-msg-bubble h4 {
      color: #e2e8f0; font-size: 13px; font-weight: 700;
      margin: 10px 0 5px; letter-spacing: .02em;
      border-bottom: 1px solid rgba(255,255,255,.08);
      padding-bottom: 4px;
    }
    .ai-msg-bubble h5 {
      color: #cbd5e1; font-size: 12px; font-weight: 600;
      margin: 8px 0 4px;
    }
    .ai-msg-bubble ul, .ai-msg-bubble ol {
      padding-left: 16px; margin: 6px 0;
    }
    .ai-msg-bubble li { margin: 3px 0; font-size: 12px; color: #cbd5e1; line-height: 1.5; }
    .ai-msg-bubble table {
      width: 100%; border-collapse: collapse;
      font-size: 11px; margin: 8px 0; border-radius: 6px; overflow: hidden;
    }
    .ai-msg-bubble th {
      background: rgba(6,182,212,.12); color: #94a3b8;
      padding: 5px 8px; text-align: left;
      border: 1px solid rgba(255,255,255,.09);
      font-weight: 600; font-size: 10px; letter-spacing: .05em; text-transform: uppercase;
    }
    .ai-msg-bubble td {
      color: #cbd5e1; padding: 4px 8px;
      border: 1px solid rgba(255,255,255,.07);
      font-size: 11px;
    }
    .ai-msg-bubble tr:nth-child(even) td { background: rgba(255,255,255,.02); }
    .ai-msg-bubble code {
      background: rgba(6,182,212,.1); padding: 1px 5px;
      border-radius: 3px; font-family: 'Courier New', monospace;
      font-size: 11px; color: var(--sky);
    }
    .ai-msg-bubble p { margin: 4px 0; }

    .ai-typing-bubble {
      display: flex; gap: 4px; align-items: center;
      padding: 10px 12px;
    }

    .ai-typing-bubble span {
      width: 5px; height: 5px;
      background: var(--sky); border-radius: 50%;
      animation: aiTyping 1s infinite;
    }

    .ai-typing-bubble span:nth-child(2) { animation-delay: .18s; }
    .ai-typing-bubble span:nth-child(3) { animation-delay: .36s; }

    @keyframes aiTyping {
      0%, 75%, 100% { opacity: .2; transform: scale(1); }
      40% { opacity: 1; transform: scale(1.35); }
    }

    /* ── MODAL ── */
    .modal-overlay {
      display: none; position: fixed; inset: 0;
      background: rgba(4,7,18,0.92);
      backdrop-filter: blur(12px);
      z-index: 1000;
      align-items: center; justify-content: center;
      padding: 40px;
    }

    .modal-overlay.open { display: flex; animation: fadeIn .18s ease; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .modal-box {
      background: #0f172a;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 20px; padding: 44px 52px;
      max-width: 740px; width: 100%;
      position: relative;
      animation: slideUp .22s ease;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.7);
    }

    @keyframes slideUp {
      from { transform: translateY(24px); opacity: 0; }
      to   { transform: translateY(0);    opacity: 1; }
    }

    .modal-close {
      position: absolute; top: 20px; right: 24px;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 7px; color: #94a3b8;
      font-size: 16px; width: 34px; height: 34px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: background .15s, color .15s;
    }

    .modal-close:hover { background: rgba(255,255,255,.12); color: #fff; }

    .modal-top { display: flex; align-items: center; gap: 14px; margin-bottom: 28px; }

    .modal-num {
      width: 48px; height: 48px; border-radius: 13px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 18px; font-weight: 700; flex-shrink: 0;
    }

    .modal-tag {
      font-size: 10px; font-weight: 700;
      letter-spacing: .10em; text-transform: uppercase;
      padding: 4px 11px; border-radius: 6px; border: 1px solid;
    }

    .modal-title {
      font-family: 'Cinzel', serif;
      font-size: 2rem; font-weight: 700;
      color: #fff; line-height: 1.2;
      margin-bottom: 20px; letter-spacing: .02em;
    }

    .modal-body {
      font-size: 1.05rem; color: #cbd5e1; line-height: 1.8;
    }

    .modal-body strong { color: #fff; }

    .modal-hint {
      margin-top: 36px; font-size: 11px;
      color: #475569; text-align: center; letter-spacing: .04em;
    }

    /* ── AI PANEL — reading mode button ── */
    .ai-panel-read {
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #64748b;
      width: 26px; height: 26px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all .15s; font-size: 11px;
      flex-shrink: 0;
    }
    .ai-panel-read:hover { background: rgba(6,182,212,.14); color: var(--sky); border-color: rgba(6,182,212,.3); }

    .ai-panel-reset {
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px; color: #64748b;
      width: 26px; height: 26px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all .15s; font-size: 11px;
      flex-shrink: 0;
    }
    .ai-panel-reset:hover { background: rgba(244,63,94,.12); color: var(--rose); border-color: rgba(244,63,94,.28); }

    /* ── COPY BUTTON on AI messages ── */
    .msg-copy-btn {
      display: none;
      position: absolute; top: 7px; right: 7px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 5px; color: #64748b;
      font-size: 10px; padding: 3px 7px;
      cursor: pointer; transition: all .15s;
      gap: 4px; align-items: center;
    }
    .msg-copy-btn i { font-size: 9px; }
    .ai-msg.assistant .ai-msg-bubble { position: relative; }
    .ai-msg.assistant:hover .msg-copy-btn { display: flex; }
    .msg-copy-btn:hover { background: rgba(6,182,212,.16); color: var(--sky); border-color: rgba(6,182,212,.3); }
    .msg-copy-btn.copied { color: var(--emerald); border-color: rgba(16,185,129,.3); }

    /* ── READING MODE OVERLAY ── */
    .reading-overlay {
      display: none;
      position: fixed; inset: 0;
      background: #0d1526;
      z-index: 2000;
      overflow-y: auto;
      padding: 0;
    }

    .reading-overlay.open { display: block; animation: fadeIn .2s ease; }

    .reading-toolbar {
      position: sticky; top: 0;
      background: rgba(13,21,38,.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,.07);
      padding: 14px 32px;
      display: flex; align-items: center; gap: 14px;
      z-index: 1;
    }

    .reading-toolbar-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px; font-weight: 700; color: var(--sky);
      flex: 1;
    }

    .reading-toolbar-sub {
      font-size: 11px; color: #475569;
    }

    .reading-close-btn {
      display: flex; align-items: center; gap: 6px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 8px;
      color: #94a3b8; font-size: 12px;
      padding: 7px 14px; cursor: pointer;
      transition: all .15s;
      font-family: 'Inter', sans-serif;
    }
    .reading-close-btn:hover { background: rgba(255,255,255,.12); color: #fff; }

    .reading-font-toggle {
      display: flex; gap: 4px;
    }

    .reading-font-btn {
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 6px;
      color: #64748b; font-size: 11px;
      padding: 5px 10px; cursor: pointer;
      transition: all .15s;
      font-family: 'Inter', sans-serif;
    }
    .reading-font-btn:hover { color: #e2e8f0; border-color: rgba(255,255,255,.2); }
    .reading-font-btn.active { background: rgba(6,182,212,.14); color: var(--sky); border-color: rgba(6,182,212,.3); }

    .reading-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 48px 32px 80px;
    }

    .reading-empty {
      text-align: center; color: #475569;
      padding: 80px 20px; font-size: 14px; line-height: 2;
    }

    .reading-msg {
      margin-bottom: 32px;
      border-radius: 14px;
      padding: 24px 28px;
      position: relative;
    }

    .reading-msg.user {
      background: rgba(59,130,246,.07);
      border: 1px solid rgba(59,130,246,.15);
    }

    .reading-msg.assistant {
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.07);
    }

    .reading-msg-label {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 10px; font-weight: 700;
      letter-spacing: .10em; text-transform: uppercase;
      margin-bottom: 14px;
      display: flex; align-items: center; gap: 7px;
    }

    .reading-msg-label i { font-size: 11px; }

    .reading-msg-text {
      font-size: 15px; line-height: 1.85;
      color: #e2e8f0;
    }

    .reading-msg-text.small { font-size: 13px; line-height: 1.75; }
    .reading-msg-text.large { font-size: 18px; line-height: 2; }

    /* Markdown inside reading mode — larger */
    .reading-msg-text h4 {
      color: #fff; font-size: 17px; font-weight: 700;
      margin: 16px 0 8px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      padding-bottom: 6px;
    }
    .reading-msg-text h5 {
      color: #e2e8f0; font-size: 15px; font-weight: 600;
      margin: 12px 0 6px;
    }
    .reading-msg-text ul, .reading-msg-text ol {
      padding-left: 20px; margin: 8px 0;
    }
    .reading-msg-text li { margin: 5px 0; line-height: 1.7; }
    .reading-msg-text table {
      width: 100%; border-collapse: collapse;
      font-size: 13px; margin: 12px 0;
    }
    .reading-msg-text th {
      background: rgba(6,182,212,.10); color: #94a3b8;
      padding: 7px 12px; text-align: left;
      border: 1px solid rgba(255,255,255,.09);
      font-size: 11px; letter-spacing: .05em; text-transform: uppercase;
    }
    .reading-msg-text td {
      color: #cbd5e1; padding: 6px 12px;
      border: 1px solid rgba(255,255,255,.07);
    }
    .reading-msg-text tr:nth-child(even) td { background: rgba(255,255,255,.02); }
    .reading-msg-text code {
      background: rgba(6,182,212,.1); padding: 2px 7px;
      border-radius: 4px; font-family: 'Courier New', monospace;
      font-size: 13px; color: var(--sky);
    }
    .reading-msg-text p { margin: 6px 0; }
    .reading-msg-text strong { color: #fff; }

    .reading-copy-btn {
      position: absolute; top: 16px; right: 16px;
      display: flex; align-items: center; gap: 5px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 7px; color: #64748b;
      font-size: 11px; padding: 5px 10px;
      cursor: pointer; transition: all .15s;
      font-family: 'Inter', sans-serif;
    }
    .reading-copy-btn:hover { background: rgba(6,182,212,.12); color: var(--sky); border-color: rgba(6,182,212,.3); }
    .reading-copy-btn.copied { color: var(--emerald); border-color: rgba(16,185,129,.3); }
  </style>
</head>
<body>

<!-- ═══════════════ SIDEBAR ═══════════════ -->
<aside class="sidebar">
  <div class="logo">
    <div class="logo-icon">Q</div>
    <div>
      <div class="logo-name">QWIKKEN</div>
      <div class="logo-sub">Project Overview</div>
    </div>
  </div>

  <nav class="nav">

    <div class="nav-section" style="color:var(--sky)">Strategy</div>
    <div class="nav-item active"><span class="nav-num">01</span>Il Progetto</div>
    <div class="nav-item"><span class="nav-num">02</span>Cognitive Twin</div>
    <div class="nav-item"><span class="nav-num">03</span>Architettura</div>

    <div class="nav-section" style="color:var(--cyan)">Acceleratori Cognitivi</div>
    <div class="nav-item"><span class="nav-num">04</span>Acceleratore Cognitivo</div>
    <div class="nav-item"><span class="nav-num">05</span>Marketplace Conoscenza</div>

    <div class="nav-section" style="color:var(--emerald)">Analisi dei Costi</div>
    <div class="nav-item"><span class="nav-num">06</span>Model Cascading</div>
    <div class="nav-item"><span class="nav-num">07</span>Unit Economics</div>
    <div class="nav-item"><span class="nav-num">08</span>Offline Intelligence</div>

    <div class="nav-section" style="color:var(--blue)">Mercati e Ricavi</div>
    <div class="nav-item"><span class="nav-num">09</span>Università Telematiche</div>
    <div class="nav-item"><span class="nav-num">10</span>B2B SaaS Model</div>
    <div class="nav-item"><span class="nav-num">11</span>QWIKKEN IS FOREVER</div>

    <div class="nav-section" style="color:var(--violet)">Piano Realizzazione</div>
    <div class="nav-item"><span class="nav-num">12</span>EGEMON Architecture</div>
    <div class="nav-item"><span class="nav-num">13</span>MMS Kernel</div>
    <div class="nav-item"><span class="nav-num">14</span>Il Genoma</div>

    <div class="nav-section" style="color:var(--amber)">Proprietà Intellettuale</div>
    <div class="nav-item"><span class="nav-num">16</span>IP Genome</div>
    <div class="nav-item"><span class="nav-num">17</span>Genesis Certificate</div>
    <div class="nav-item"><span class="nav-num">18</span>Contractual Genome</div>

    <div class="nav-section" style="color:var(--rose)">Scalabilità</div>
    <div class="nav-item"><span class="nav-num">19</span>Multi-Tenant</div>
    <div class="nav-item"><span class="nav-num">20</span>PMI Aumentata</div>
    <div class="nav-item"><span class="nav-num">21</span>Cross-Industry</div>

    <div class="nav-section" style="color:var(--indigo)">WHY us</div>
    <div class="nav-item"><span class="nav-num">22</span>vs ChatGPT · Copilot</div>
    <div class="nav-item"><span class="nav-num">23</span>5 Moat Competitivi</div>
    <div class="nav-item"><span class="nav-num">24</span>Perché Ora</div>

  </nav>

  <div class="sidebar-footer">
    <span>Synthetic Data S.r.l.</span><br/>
    Monografia Tecnica · Rev 2.0 · 2026
  </div>
</aside>

<!-- ═══════════════ MAIN ═══════════════ -->
<div class="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-row">
      <div>
        <div class="breadcrumb">
          <span class="breadcrumb-tag">KNOWLEDGE ARCHITECTURE</span>
          <span class="breadcrumb-sep">·</span>
          <span class="breadcrumb-text">The Sovereign Cognitive Tutor</span>
        </div>
        <h1>QWIKKEN Project</h1>
        <p class="topbar-sub">Architettura Neuro-Simbolica per l'Education AI &nbsp;·&nbsp; Synthetic Data S.r.l. · 2026</p>
      </div>
      <button class="ai-toggle-btn" id="ai-toggle-btn">
        <i class="fa-solid fa-robot"></i>
        <span>Ask AI</span>
      </button>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- ── STRATEGY ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--sky)"></div>
      <div class="section-label" style="color:var(--sky)">Strategy</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-sky">01</div>
          <span class="card-tag tag-strategy">OVERVIEW</span>
        </div>
        <h3>Il Progetto QWIKKEN</h3>
        <p>Il primo tutor AI cognitivo progettato per garantire <strong>determinismo, tracciabilità e affidabilità</strong> nell'apprendimento. Architettura neuro-simbolica proprietaria (EGEMON). Missione: democratizzare il tutoring personalizzato di alta qualità per 45+ anni di relazione.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-sky">02</div>
          <span class="card-tag tag-strategy">FLAGSHIP</span>
        </div>
        <h3>Cognitive Twin</h3>
        <p>Il Gemello Cognitivo: rappresentazione digitale persistente dell'intelletto. <strong>Anno 1</strong>: stile di apprendimento. <strong>Anno 5</strong>: predice i bisogni. <strong>Anno 10+</strong>: archivio irriproducibile. Non si "laurea" mai — evolve per tutta la vita professionale.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-sky">03</div>
          <span class="card-tag tag-strategy">TECH</span>
        </div>
        <h3>Architettura</h3>
        <p><strong>EGEMON</strong> (Educational GEnerative MONitor) + <strong>MMS Kernel</strong> (Multi-Modal Symbolic) + <strong>Genoma</strong> (5-level config matrix). Il triumvirato neuro-simbolico che elimina le allucinazioni e garantisce audit trail completo e spiegabile.</p>
      </div>

    </div>

    <!-- ── ACCELERATORI COGNITIVI ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--cyan)"></div>
      <div class="section-label" style="color:var(--cyan)">Acceleratori Cognitivi</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-cyan">04</div>
          <span class="card-tag tag-core">ACCELERATORE</span>
        </div>
        <h3>Acceleratore Cognitivo</h3>
        <p>Cristallizzazione dell'expertise in <strong>Capsule Cognitive (.mms)</strong>: strumenti operativi che incapsulano la conoscenza di un esperto. Non un documento statico — un partner attivo e interrogabile. Il Knowledge Worker smette di vendere ore, vende expertise scalabile.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-cyan">05</div>
          <span class="card-tag tag-core">MARKET</span>
        </div>
        <h3>Marketplace Conoscenza</h3>
        <p>Ecosistema dove il Knowledge Worker monetizza la propria expertise. La conoscenza diventa <strong>asset liquido e trasferibile</strong> globalmente. Vision: <em>PIL della Conoscenza</em> — il valore non è nel possedere informazioni ma nel pacchettizzarle in strumenti operativi attivabili.</p>
      </div>

    </div>

    <!-- ── ANALISI DEI COSTI ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--emerald)"></div>
      <div class="section-label" style="color:var(--emerald)">Analisi dei Costi</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-emerald">06</div>
          <span class="card-tag tag-finops">FINOPS</span>
        </div>
        <h3>Model Cascading</h3>
        <p>Routing a 4 livelli: <strong>Fabbrica</strong> (pre-gen batch) → <strong>Bibliotecario</strong> Flash 77% → <strong>Assistente Senior</strong> 15% → <strong>Professore</strong> Pro 8%. COGS Rev 2.0: <strong>€20.62/studente/anno</strong>. Margine lordo: <strong>79%</strong>.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-emerald">07</div>
          <span class="card-tag tag-key">UNIT ECON</span>
        </div>
        <h3>Unit Economics</h3>
        <p>Canone <strong>€99.99/anno</strong>: Ingestione <strong>€6</strong> (Chirp + Flash) · Storage <strong>€6</strong> (AlloyDB) · Inferenza <strong>€26</strong> (Cascading + Caching) · Infrastruttura <strong>€2</strong>. COGS totale: <strong>€40</strong> · Margine: <strong>60%</strong> (scenario conservativo).</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-emerald">08</div>
          <span class="card-tag tag-platform">OFFLINE</span>
        </div>
        <h3>Offline Intelligence</h3>
        <p>SLM on-device: risposte pre-computate senza connessione. Anno 3+: modelli SLM proprietari distillati da Pro per materie universitarie specifiche. Riduzione dipendenza cloud <strong>-60-70%</strong>. Fair Use Policy: degradazione gentile a Flash dopo soglia token giornaliera.</p>
      </div>

    </div>

    <!-- ── MERCATI E RICAVI ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--blue)"></div>
      <div class="section-label" style="color:var(--blue)">Mercati e Ricavi</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-blue">09</div>
          <span class="card-tag tag-market">TARGET</span>
        </div>
        <h3>Università Telematiche</h3>
        <p><strong>11 atenei italiani</strong>: 3 Multiversity (CVC Capital) + 8 indipendenti. Target Anno 1: <strong>Uninettuno</strong> (~18k, max ANVUR) ed <strong>eCampus</strong> (~80k) — grandi, autonome nelle decisioni, zero soluzioni compliance-ready sul mercato oggi.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-blue">10</div>
          <span class="card-tag tag-market">REVENUE</span>
        </div>
        <h3>B2B SaaS Model</h3>
        <p>Licenza B2B all'università. Investimento: <strong>€300k</strong> · Break-even: <strong>Anno 1</strong> · LTV Education: €245 · LTV Lifelong: <strong>€800–1.200</strong> (+5x) · Churn: <strong>-40%</strong> vs competitor · Pilot: 2.000 studenti per validazione mercato.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-blue">11</div>
          <span class="card-tag tag-forever">FOREVER</span>
        </div>
        <h3>QWIKKEN IS FOREVER</h3>
        <p>Paradigma Lifelong: <strong>Università → Early Career → Mid Career → Executive → Active Aging</strong>. Il Twin non si laurea mai. 45+ anni di relazione continua. LTV cumulativo irraggiungibile da qualsiasi competitor con abbonamento annuale.</p>
      </div>

    </div>

    <!-- ── PIANO REALIZZAZIONE ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--violet)"></div>
      <div class="section-label" style="color:var(--violet)">Piano Realizzazione</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-violet">12</div>
          <span class="card-tag tag-arch">ARCHITETTURA</span>
        </div>
        <h3>EGEMON Architecture</h3>
        <p><strong>Educational GEnerative MONitor</strong> — motore neuro-simbolico proprietario. Combina inferenza LLM con Knowledge Graph + Rule Engine. Quasi zero allucinazioni sui contenuti del corso. Foundation tecnologica di tutta la piattaforma QWIKKEN.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-violet">13</div>
          <span class="card-tag tag-arch">KERNEL</span>
        </div>
        <h3>MMS Kernel</h3>
        <p><strong>Multi-Modal Symbolic Kernel</strong> — orchestratore centrale deterministico. Pipeline: Parser → Router → Retriever → Generator → Validator. A parità di input produce output identico e tracciabile ogni volta. Zero allucinazioni sui contenuti del corso.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-violet">14</div>
          <span class="card-tag tag-arch">DNA</span>
        </div>
        <h3>Il Genoma</h3>
        <p>Matrice semantica a 5 livelli: <strong>Governance → Domain → User → Contractual → IP</strong>. Il DNA di ogni Cognitive Twin: regole ferree, fonti citate, personalizzazione contestualizzata. Aggiornabile centralmente con propagazione istantanea a tutti i tenant.</p>
      </div>

    </div>

    <!-- ── PROPRIETÀ INTELLETTUALE ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--amber)"></div>
      <div class="section-label" style="color:var(--amber)">Proprietà Intellettuale</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-amber">16</div>
          <span class="card-tag tag-ip">IP</span>
        </div>
        <h3>IP Genome</h3>
        <p>Il Genoma come strumento legale: ogni output cita la fonte e rispetta il <strong>Silos di Intelligence</strong>. Dati aziendali segregati. L'elaborazione originale dell'utente diventa il suo <strong>Asset Proprietario</strong> — non espropriabile né condiviso senza consenso.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-amber">17</div>
          <span class="card-tag tag-ip">CERTIF</span>
        </div>
        <h3>Genesis Certificate</h3>
        <p>Certificato per ogni output: data, fonti, versione modello AI, <strong>livello assistenza AI vs contributo umano</strong>. Compliance AI Act EU Art.13. Prerequisito non negoziabile per adozione universitaria istituzionale. Ogni risposta è verificabile e difendibile.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-amber">18</div>
          <span class="card-tag tag-ip">LEGAL</span>
        </div>
        <h3>Contractual Genome</h3>
        <p>Il Genoma come documento contrattuale vivo: definisce vincoli legali, etici e operativi per ogni contesto (PA, Aziende, Università). Nuova normativa → propagazione istantanea a tutti i tenant attivi. Es: <em>"Nuova Legge Appalti"</em> → aggiornamento automatico globale.</p>
      </div>

    </div>

    <!-- ── SCALABILITÀ ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--rose)"></div>
      <div class="section-label" style="color:var(--rose)">Scalabilità</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-rose">19</div>
          <span class="card-tag tag-scale">INFRA</span>
        </div>
        <h3>Multi-Tenant Architecture</h3>
        <p>Microservizi su <strong>Kubernetes</strong>: auto-scaling CPU, Redis caching, sharding fisico PA/Enterprise. Ogni tenant: namespace crittografato isolato. Qdrant + PostgreSQL + Neo4j + S3. Resiliente, sicuro, zero single point of failure.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-rose">20</div>
          <span class="card-tag tag-scale">SME</span>
        </div>
        <h3>PMI Aumentata</h3>
        <p>La PMI ottiene processi da multinazionale: Genoma pre-configurato (AI Act + GDPR + Codice Etico), knowledge base segregata, compliance documentata automaticamente. <strong>Democratizzazione dell'Eccellenza</strong> per le imprese italiane che competono globalmente.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-rose">21</div>
          <span class="card-tag tag-scale">VERTICAL</span>
        </div>
        <h3>Cross-Industry</h3>
        <p>EGEMON è <strong>domain-agnostic</strong>: Education (QWIKKEN) → Credit (qwikken-credit) → Legal → Healthcare → Finance. Il Genoma si riscrive per il dominio, il Kernel rimane invariato. Ogni verticale è un nuovo mercato accessibile senza riscrivere il core tecnologico.</p>
      </div>

    </div>

    <!-- ── WHY US ── -->
    <div class="section-header">
      <div class="section-dot" style="background:var(--indigo)"></div>
      <div class="section-label" style="color:var(--indigo)">WHY us</div>
      <div class="section-line"></div>
    </div>
    <div class="card-grid">

      <div class="card">
        <div class="card-top">
          <div class="card-num num-indigo">22</div>
          <span class="card-tag tag-diff">VS</span>
        </div>
        <h3>vs ChatGPT · Copilot</h3>
        <p>ChatGPT: allucinazioni 15-20%, no struttura curricolare, no audit, no compliance EU. QWIKKEN: <strong>quasi zero allucinazioni</strong> (bounded reasoning sul Genoma), curricolo nativo, audit trail, AI Act EU nativa, Cognitive Twin lifelong persistente. Non è confrontabile.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-indigo">23</div>
          <span class="card-tag tag-moat">MOAT</span>
        </div>
        <h3>5 Moat Competitivi</h3>
        <p><strong>Technology</strong>: MMS + Genoma non replicabili. <strong>Data</strong>: Twin irriproducibile. <strong>Network</strong>: flywheel studenti→docenti→università. <strong>Integration</strong>: switching cost LMS alto. <strong>Trust</strong>: GDPR + AI Act EU — vantaggio assoluto in Europa post-2026.</p>
      </div>

      <div class="card">
        <div class="card-top">
          <div class="card-num num-indigo">24</div>
          <span class="card-tag tag-indigo">TIMING</span>
        </div>
        <h3>Perché Ora</h3>
        <p>Tre forze convergenti: <strong>AI Act EU</strong> in vigore 2026 (compliance obbligatoria) · <strong>Mercato Education AI</strong> $20B entro 2030 · <strong>Finestra ante-consolidation</strong>: 11 atenei telematici italiani senza soluzione compliance-ready. La finestra si chiude tra 18-24 mesi.</p>
      </div>

    </div>

  </div><!-- /content -->
</div><!-- /main -->

<!-- ═══════════════ AI PANEL — Permanent Right Sidebar ═══════════════ -->
<div class="ai-panel" id="ai-panel">

  <div class="ai-panel-header">
    <div class="ai-panel-icon"><i class="fa-solid fa-robot"></i></div>
    <div style="flex:1;min-width:0">
      <div class="ai-panel-title">QWIKKEN AI</div>
      <div class="ai-panel-sub">Sessione Q&amp;A · Documentazione live</div>
    </div>
    <button class="ai-panel-reset" id="ai-panel-reset" title="Nuova sessione">
      <i class="fa-solid fa-rotate-left"></i>
    </button>
    <button class="ai-panel-read" id="ai-panel-read" title="Apri Modalità Lettura">
      <i class="fa-solid fa-book-open"></i>
    </button>
    <button class="ai-panel-expand" id="ai-panel-expand" title="Espandi pannello">
      <i class="fa-solid fa-arrows-left-right"></i>
    </button>
    <button class="ai-panel-close" id="ai-panel-close" title="Riduci pannello">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <div class="ai-model-bar">
    <span class="ai-model-label">Modello:</span>
    <select class="ai-model-select" id="ai-model-select">
      <option value="anthropic/claude-haiku-4-5-20251001" selected>Haiku 4.5 ⚡ (veloce)</option>
      <option value="anthropic/claude-opus-4.6">Opus 4.6 ✦ (qualità)</option>
      <option value="google/gemini-flash-1.5">Gemini Flash (economico)</option>
    </select>
    <button class="ai-key-btn" id="ai-key-btn" title="Imposta API Key">
      <i class="fa-solid fa-key"></i>
    </button>
  </div>

  <div class="ai-messages" id="ai-messages">
    <div class="ai-empty" id="ai-empty">
      <div class="ai-empty-icon"><i class="fa-solid fa-comments"></i></div>
      <div class="ai-empty-text">
        Fai una domanda sul progetto QWIKKEN.<br/>
        L'AI risponde dalla documentazione tecnica,<br/>strategica e finanziaria.
      </div>
    </div>
  </div>

  <div class="ai-input-area">
    <div class="ai-textarea-wrap">
      <textarea
        class="ai-textarea"
        id="ai-textarea"
        placeholder="Domanda su QWIKKEN..."
        rows="3"
        spellcheck="true"
        lang="it"
      ></textarea>
      <div class="ai-textarea-actions">
        <span class="ai-hint-text">↵ invia &nbsp;·&nbsp; Shift+↵ a capo</span>
        <div style="display:flex;gap:6px">
          <button class="ai-stop-btn" id="ai-stop-btn">
            <i class="fa-solid fa-stop"></i>
            Stop
          </button>
          <button class="ai-send-btn" id="ai-send-btn">
            <i class="fa-solid fa-paper-plane"></i>
            Invia
          </button>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ═══════════════ READING MODE OVERLAY ═══════════════ -->
<div class="reading-overlay" id="reading-overlay">

  <div class="reading-toolbar">
    <div class="reading-toolbar-title"><i class="fa-solid fa-book-open" style="margin-right:8px;opacity:.7"></i>Modalità Lettura</div>
    <div class="reading-toolbar-sub">Conversazione QWIKKEN AI</div>
    <div class="reading-font-toggle">
      <button class="reading-font-btn" data-size="small">A<sup style="font-size:7px">−</sup></button>
      <button class="reading-font-btn active" data-size="normal">A</button>
      <button class="reading-font-btn" data-size="large">A<sup style="font-size:7px">+</sup></button>
    </div>
    <button class="reading-close-btn" id="reading-close-btn">
      <i class="fa-solid fa-xmark"></i> Chiudi
    </button>
  </div>

  <div class="reading-content" id="reading-content">
    <div class="reading-empty" id="reading-empty">
      <i class="fa-solid fa-comments" style="font-size:36px;opacity:.2;display:block;margin-bottom:16px"></i>
      Nessuna conversazione da leggere.<br/>
      Fai prima una domanda nel pannello AI.
    </div>
  </div>

</div>

<!-- ═══════════════ MODAL ═══════════════ -->
<div class="modal-overlay" id="modal">
  <div class="modal-box">
    <button class="modal-close" id="modal-close"><i class="fa-solid fa-xmark"></i></button>
    <div class="modal-top">
      <div class="modal-num" id="modal-num"></div>
      <span class="modal-tag" id="modal-tag" style="display:none"></span>
    </div>
    <div class="modal-title" id="modal-title"></div>
    <div class="modal-body" id="modal-body"></div>
    <div class="modal-hint">ESC o click fuori per chiudere</div>
  </div>
</div>

<script>
  // ── Sidebar nav highlight ──
  document.querySelectorAll('.nav-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
      item.classList.add('active');
    });
  });

  // ── Modal ──
  const overlay    = document.getElementById('modal');
  const modalNum   = document.getElementById('modal-num');
  const modalTag   = document.getElementById('modal-tag');
  const modalTitle = document.getElementById('modal-title');
  const modalBody  = document.getElementById('modal-body');

  function openModal(card) {
    const num   = card.querySelector('.card-num');
    const tag   = card.querySelector('.card-tag');
    const title = card.querySelector('h3');
    const body  = card.querySelector('p');
    modalNum.textContent = num.textContent;
    modalNum.className   = 'modal-num ' + num.className.replace('card-num','').trim();
    if (tag) {
      modalTag.textContent = tag.textContent;
      modalTag.className   = 'modal-tag ' + tag.className.replace('card-tag','').trim();
      modalTag.style.display = 'inline-block';
    } else { modalTag.style.display = 'none'; }
    modalTitle.textContent = title.textContent;
    modalBody.innerHTML    = body.innerHTML;
    overlay.classList.add('open');
  }

  function closeModal() { overlay.classList.remove('open'); }

  document.querySelectorAll('.card').forEach(c => c.addEventListener('click', () => openModal(c)));
  document.getElementById('modal-close').addEventListener('click', closeModal);
  overlay.addEventListener('click', e => { if (e.target === overlay) closeModal(); });
  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

  // ── Reading Mode ──
  const readingOverlay  = document.getElementById('reading-overlay');
  const readingContent  = document.getElementById('reading-content');
  const readingEmptyEl  = document.getElementById('reading-empty');
  const readingCloseBtn = document.getElementById('reading-close-btn');
  let readingFontSize   = 'normal';

  document.querySelectorAll('.reading-font-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      readingFontSize = btn.dataset.size;
      document.querySelectorAll('.reading-font-btn').forEach(b => b.classList.toggle('active', b === btn));
      readingContent.querySelectorAll('.reading-msg-text').forEach(el => {
        el.className = 'reading-msg-text' + (readingFontSize !== 'normal' ? ' ' + readingFontSize : '');
      });
    });
  });

  function copyText(text, btn) {
    navigator.clipboard.writeText(text).then(() => {
      btn.classList.add('copied');
      const orig = btn.innerHTML;
      btn.innerHTML = '<i class="fa-solid fa-check"></i> Copiato';
      setTimeout(() => { btn.classList.remove('copied'); btn.innerHTML = orig; }, 1800);
    }).catch(() => {});
  }

  function openReadingMode() {
    if (!chatHistory || chatHistory.length === 0) {
      readingEmptyEl.style.display = 'block';
      readingContent.querySelectorAll('.reading-msg').forEach(el => el.remove());
    } else {
      readingEmptyEl.style.display = 'none';
      readingContent.querySelectorAll('.reading-msg').forEach(el => el.remove());
      chatHistory.forEach(msg => {
        const div = document.createElement('div');
        div.className = `reading-msg ${msg.role}`;

        const label = document.createElement('div');
        label.className = 'reading-msg-label';
        if (msg.role === 'user') {
          label.style.color = 'var(--blue)';
          label.innerHTML = '<i class="fa-solid fa-user"></i> Tu';
        } else {
          label.style.color = 'var(--sky)';
          label.innerHTML = '<i class="fa-solid fa-robot"></i> QWIKKEN AI';
        }

        const text = document.createElement('div');
        text.className = 'reading-msg-text' + (readingFontSize !== 'normal' ? ' ' + readingFontSize : '');
        text.innerHTML = msg.role === 'assistant' ? renderMarkdown(msg.content) : fmt(msg.content);

        const copyBtn = document.createElement('button');
        copyBtn.className = 'reading-copy-btn';
        copyBtn.innerHTML = '<i class="fa-regular fa-copy"></i> Copia';
        copyBtn.addEventListener('click', () => copyText(msg.content, copyBtn));

        div.appendChild(label);
        div.appendChild(text);
        div.appendChild(copyBtn);
        readingContent.appendChild(div);
      });
    }
    readingOverlay.classList.add('open');
    readingContent.scrollTop = 0;
    readingOverlay.scrollTop = 0;
  }

  readingCloseBtn.addEventListener('click', () => readingOverlay.classList.remove('open'));
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      if (readingOverlay.classList.contains('open')) {
        readingOverlay.classList.remove('open');
      }
    }
  });

  // ── AI Panel — toggle ──
  const aiPanel       = document.getElementById('ai-panel');
  const aiToggleBtn   = document.getElementById('ai-toggle-btn');
  const aiPanelClose  = document.getElementById('ai-panel-close');
  const aiPanelExpand = document.getElementById('ai-panel-expand');
  const aiMessages    = document.getElementById('ai-messages');
  const aiEmpty       = document.getElementById('ai-empty');
  const aiTextarea    = document.getElementById('ai-textarea');
  const aiSendBtn     = document.getElementById('ai-send-btn');
  const aiStopBtn     = document.getElementById('ai-stop-btn');
  const aiModelSel    = document.getElementById('ai-model-select');
  const aiKeyBtn      = document.getElementById('ai-key-btn');

  // Collapse / expand panel
  aiToggleBtn.addEventListener('click', () => {
    const collapsed = aiPanel.classList.toggle('collapsed');
    aiToggleBtn.classList.toggle('active', !collapsed);
    if (!collapsed) setTimeout(() => aiTextarea.focus(), 300);
  });

  aiPanelClose.addEventListener('click', () => {
    aiPanel.classList.add('collapsed');
    aiToggleBtn.classList.remove('active');
  });

  // Widen panel to the left
  aiPanelExpand.addEventListener('click', () => {
    const expanded = aiPanel.classList.toggle('expanded');
    const icon = aiPanelExpand.querySelector('i');
    icon.className = expanded ? 'fa-solid fa-compress' : 'fa-solid fa-arrows-left-right';
    aiPanelExpand.title = expanded ? 'Riduci larghezza' : 'Espandi pannello';
  });

  // Reset session button
  document.getElementById('ai-panel-reset').addEventListener('click', () => {
    if (chatHistory.length === 0) return;
    if (!confirm('Cancellare la conversazione e iniziare una nuova sessione?')) return;
    chatHistory = [];
    aiMessages.innerHTML = '';
    aiMessages.appendChild(aiEmpty);
    aiEmpty.style.display = 'flex';
  });

  // Reading Mode button
  document.getElementById('ai-panel-read').addEventListener('click', openReadingMode);

  // Panel starts open
  aiToggleBtn.classList.add('active');

  // ── API Key ──
  const LS_KEY = 'qwikken_openrouter_key';

  function getApiKey() {
    let k = localStorage.getItem(LS_KEY);
    if (!k) {
      k = prompt('Inserisci la tua OpenRouter API Key:\n(Salvata localmente nel browser, mai condivisa)');
      if (k && k.trim()) localStorage.setItem(LS_KEY, k.trim());
    }
    return k ? k.trim() : null;
  }

  aiKeyBtn.addEventListener('click', () => {
    const cur = localStorage.getItem(LS_KEY) || '';
    const k = prompt('OpenRouter API Key:', cur);
    if (k !== null) localStorage.setItem(LS_KEY, k.trim());
  });

  // ── Chat ──
  let chatHistory = [];
  let abortCtrl   = null;

  aiTextarea.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMsg(); }
  });
  aiSendBtn.addEventListener('click', sendMsg);

  aiStopBtn.addEventListener('click', () => {
    if (abortCtrl) abortCtrl.abort();
  });

  function appendMsg(role, html, rawText) {
    aiEmpty.style.display = 'none';
    const wrap = document.createElement('div');
    wrap.className = `ai-msg ${role}`;
    const av = document.createElement('div');
    av.className = 'ai-msg-avatar';
    av.innerHTML = role === 'user' ? '<i class="fa-solid fa-user"></i>' : '<i class="fa-solid fa-robot"></i>';
    const bbl = document.createElement('div');
    bbl.className = 'ai-msg-bubble';
    bbl.innerHTML = html;
    // Add copy button to assistant messages
    if (role === 'assistant' && rawText) {
      const cpBtn = document.createElement('button');
      cpBtn.className = 'msg-copy-btn';
      cpBtn.innerHTML = '<i class="fa-regular fa-copy"></i> Copia';
      cpBtn.addEventListener('click', e => { e.stopPropagation(); copyText(rawText, cpBtn); });
      bbl.appendChild(cpBtn);
    }
    wrap.appendChild(av);
    wrap.appendChild(bbl);
    aiMessages.appendChild(wrap);
    aiMessages.scrollTop = aiMessages.scrollHeight;
    return bbl;
  }

  function addTyping() {
    const wrap = document.createElement('div');
    wrap.className = 'ai-msg assistant';
    wrap.id = 'ai-typing';
    const av = document.createElement('div');
    av.className = 'ai-msg-avatar';
    av.innerHTML = '<i class="fa-solid fa-robot"></i>';
    const bbl = document.createElement('div');
    bbl.className = 'ai-msg-bubble ai-typing-bubble';
    bbl.innerHTML = '<span></span><span></span><span></span>';
    wrap.appendChild(av);
    wrap.appendChild(bbl);
    aiMessages.appendChild(wrap);
    aiMessages.scrollTop = aiMessages.scrollHeight;
    return wrap;
  }

  // Inline formatting (bold, italic, code)
  function inlineFmt(s) {
    return s
      .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.+?)\*/g,     '<em>$1</em>')
      .replace(/`(.+?)`/g,       '<code>$1</code>');
  }

  // Full markdown renderer for AI responses
  function renderMarkdown(raw) {
    // Escape HTML
    const esc = raw
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');

    const lines = esc.split('\n');
    const out = [];
    let inUl = false, inOl = false;
    let inTable = false, tableHead = true;

    const closeBlocks = () => {
      if (inUl)    { out.push('</ul>');              inUl = false; }
      if (inOl)    { out.push('</ol>');              inOl = false; }
      if (inTable) { out.push('</tbody></table>');   inTable = false; tableHead = true; }
    };

    for (const line of lines) {
      // H3
      if (/^### (.+)/.test(line)) {
        closeBlocks();
        out.push(`<h5>${inlineFmt(line.slice(4))}</h5>`);
        continue;
      }
      // H2
      if (/^## (.+)/.test(line)) {
        closeBlocks();
        out.push(`<h4>${inlineFmt(line.slice(3))}</h4>`);
        continue;
      }
      // H1
      if (/^# (.+)/.test(line)) {
        closeBlocks();
        out.push(`<h4>${inlineFmt(line.slice(2))}</h4>`);
        continue;
      }
      // Table separator |---|---|
      if (/^\|[-| :]+\|$/.test(line.trim())) {
        if (inTable && tableHead) {
          out.push('</thead><tbody>');
          tableHead = false;
        }
        continue;
      }
      // Table row
      if (/^\|/.test(line)) {
        if (!inTable) {
          closeBlocks();
          inTable = true; tableHead = true;
          out.push('<table><thead>');
        }
        const cells = line.split('|').slice(1, -1); // remove first/last empty
        const tag = tableHead ? 'th' : 'td';
        out.push('<tr>' + cells.map(c => `<${tag}>${inlineFmt(c.trim())}</${tag}>`).join('') + '</tr>');
        continue;
      }
      // Unordered list
      if (/^[-*] (.+)/.test(line)) {
        if (inOl) { out.push('</ol>'); inOl = false; }
        if (inTable) { out.push('</tbody></table>'); inTable = false; tableHead = true; }
        if (!inUl) { out.push('<ul>'); inUl = true; }
        out.push(`<li>${inlineFmt(line.replace(/^[-*] /, ''))}</li>`);
        continue;
      }
      // Ordered list
      if (/^\d+\. (.+)/.test(line)) {
        if (inUl) { out.push('</ul>'); inUl = false; }
        if (inTable) { out.push('</tbody></table>'); inTable = false; tableHead = true; }
        if (!inOl) { out.push('<ol>'); inOl = true; }
        out.push(`<li>${inlineFmt(line.replace(/^\d+\. /, ''))}</li>`);
        continue;
      }
      // Empty line
      if (line.trim() === '') {
        closeBlocks();
        out.push('<br>');
        continue;
      }
      // Paragraph line
      closeBlocks();
      out.push(`<p>${inlineFmt(line)}</p>`);
    }
    closeBlocks();
    return out.join('');
  }

  // For user messages: simple escape + bold only
  function fmt(t) {
    return t
      .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
      .replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>')
      .replace(/\n/g,'<br>');
  }

  const DOCS_CONTEXT = `
# QWIKKEN — Documentazione di Riferimento (Rev 2.0 · Febbraio 2026)
Synthetic Data S.r.l. · Graziano Guiducci & Lorenzo Bosio

## STRATEGY — Il Progetto
QWIKKEN = The Sovereign Cognitive Tutor. Primo tutor AI progettato per garantire determinismo, tracciabilità e affidabilità nell'apprendimento. Architettura neuro-simbolica proprietaria (EGEMON). Fondata da Synthetic Data S.r.l.

## STRATEGY — Cognitive Twin
Il Gemello Cognitivo: rappresentazione digitale persistente del profilo intellettuale. Anno 1: stile di apprendimento. Anno 5: predice i bisogni futuri. Anno 10+: archivio irriproducibile dell'evoluzione intellettuale. Non si "laurea" mai — 45+ anni di relazione continua.

## STRATEGY — Architettura
Triumvirato neuro-simbolico: EGEMON (Educational GEnerative MONitor) + MMS Kernel (Multi-Modal Symbolic Kernel) + Il Genoma (matrice semantica 5 livelli). Eliminazione quasi totale delle allucinazioni. Audit trail completo e spiegabile.

## ACCELERATORI COGNITIVI — L'Acceleratore Cognitivo (Sezioni 6-7)
L'Acceleratore Cognitivo non è una banca dati consultabile: è la cristallizzazione operativa dell'expertise di un esperto, configurata per essere trasferita, interrogata ed eseguita da terze parti senza la presenza fisica dell'esperto. Non spiega come fare; fa. Non insegna a ragionare; ragiona. Non suggerisce azioni; le compie o le guida passo per passo.

Differenza rispetto a forme tradizionali: un libro trasferisce informazioni (il lettore interpreta e applica); un corso trasferisce competenze (lo studente interiorizza); un consulente trasferisce analisi (il cliente implementa). L'Acceleratore trasferisce CAPACITÀ OPERATIVE direttamente eseguibili.

PKL e Proiezione Orientata: la Personal Knowledge Library (PKL) è la luce bianca — tutto ciò che l'esperto sa. L'Acceleratore è un PRISMA che proietta uno spettro specifico: Luce Blu (proiezione didattica per studenti), Luce Rossa (proiezione consulenziale per manager), Luce Verde (proiezione operativa per tecnici). Lo stesso esperto crea multipli Acceleratori dalla stessa PKL cambiando il Genoma di Scopo.

Principi Operativi:
- Knowledge Liquidity: la conoscenza da "solida" (bloccata nella testa dell'esperto) diventa "liquida" — atomizzata in nodi semantici ricombinabili dinamicamente.
- Segregazione dell'Expertise: l'Acceleratore fornisce il risultato dell'expertise, non la fonte grezza. L'utente riceve valore pieno; l'esperto mantiene il controllo sulla propria IP.
- Contextual Projection: stesso nodo di conoscenza, comportamento radicalmente diverso in base al contesto (Modalità Tutor vs Modalità Advisor).

La Capsula Cognitiva (.mms) — formato di distribuzione dell'Acceleratore:
- Vettori Semantici (The Brain): conoscenza compressa in embeddings matematici. NON contengono i documenti originali — proteggono l'IP dell'autore.
- Frammento di Genoma (The Logic): regole procedurali, workflow, vincoli, parametri. Trasforma la base di conoscenza passiva in agente attivo.
- Interfaccia di Intento (The API): mappa degli intent, parametri richiesti, output attesi. L'utente sa prima cosa acquisirà.
- Certificato di Validazione (The Trust): firma digitale dell'autore + ente certificatore. Qualsiasi modifica al contenuto invalida il certificato.

Semantic Docking (Innesto): procedura di integrazione della Capsula nel Cognitive Twin. 1) Download nel perimetro sicuro. 2) Vector Alignment cross-lingua (concetti tedeschi mappati su italiani via spazio vettoriale, non traduzione). 3) Activation come nuova "lente" — la Capsula mantiene identità separata, attivabile/disattivabile.

Tipologie di Capsula:
- Acceleratore Didattico (Course Twin): per studenti. Genoma pedagogico. Vieta ghostwriting — non scrive elaborati al posto dello studente.
- Acceleratore Consulenziale (Audit Twin): per manager. Analizza bilanci, genera report con raccomandazioni actionable.
- Capsula Gestionale (Virtual C-Suite): per PMI. Virtual CFO (cash flow), Virtual COO (lean management), Virtual CMO.
- Capsula Tecnica (Vendor Knowledge): per tecnici/manutentori. Diagnostica, procedure passo-passo, schemi tecnici.

## ACCELERATORI COGNITIVI — Il Marketplace / K-Store (Sezioni 8-10)
Il K-Store non è un Search Engine ma uno "Skill Store": non vende informazioni da leggere, vende CAPACITÀ OPERATIVE già pronte all'uso. Passaggio dall'Economia dell'Informazione (valore nel possedere dati) all'Economia delle Capacità (valore nel saper fare). Da "Do It Yourself" ad "Augmented Execution": l'utente fornisce contesto e dati, l'Acceleratore esegue.

La Fine della Torre di Babele: i Large Language Model multilingua creano un substrato semantico universale. I concetti non sono memorizzati come parole italiane/inglesi/cinesi ma come vettori matematici che rappresentano il significato puro. "Schraube" tedesco e "Vite" italiano occupano posizioni equivalenti nello spazio vettoriale — senza traduzione manuale. La conoscenza diventa asset liquido globale.

Semantic Universal Hub: allineatore di spazi semantici (non traduttore). L'utente interroga in italiano una Capsula tedesca e riceve risposte in italiano — il processo è completamente trasparente.

Dynamic Licensing: Pay-per-Module (acquisto una tantum), Subscription (abbonamento con aggiornamenti inclusi), Pay-per-Inference (pagamento per singola interrogazione — per Capsule ad alto valore con uso sporadico).

Categorie del Marketplace:
- Compliance & Legal (Global-Local Bridge): normative locali per operatori globali (es. "Brazil E-commerce Compliance Pack").
- Industrial & Maintenance (Vendor Knowledge): produttori rilasciano Capsule ufficiali per tecnici in tutto il mondo.
- Healthcare & Science: democratizzazione expertise medica (es. Rare Disease Diagnostics da Mayo Clinic in un villaggio remoto).
- Lifestyle & Coaching (Personal Guru): mentorship personalizzata scalata (es. "Massimo Bottura's Culinary Mind").
- Corporate Management (Virtual C-Suite): democratizzazione eccellenza manageriale per PMI. Virtual CFO (cash flow, alert "Se paghi oggi, vai in rosso tra 14 giorni"), Virtual COO (lean manufacturing, identifica colli di bottiglia), Virtual Sales Manager (ottimizza chiusura trattative), Virtual Compliance Officer (genera Bilancio di Sostenibilità GRI).
- Education & Training: Acceleratori Didattici universitari, formazione aziendale scalabile.

Trust Tiering:
- Tier 1 Oro (Authority Verified): enti ufficiali — Ministeri, Ordini Professionali, Grandi Vendor. Responsabilità legale del contenuto.
- Tier 2 Argento (Expert Reviewed): professionisti verificati con peer review o audit automatico.
- Tier 3 Bronzo (Community Rated): Capsule sperimentali/nicchia — validate dal mercato attraverso l'uso. Esecuzione in Semantic Sandbox obbligatoria.

Processo di Certificazione: Validazione pre-pubblicazione → Scansione sicurezza (no malware/backdoor/data exfiltration) → Verifica GDPR e assenza bias → Firma digitale + timestamping crittografico.

## ANALISI DEI COSTI — Architettura OIOD Rev 2.0 (Prezzi Reali Febbraio 2026)
Architettura a 4 strati con prezzi reali Google confermati febbraio 2026:
- Strato 1 — LA FABBRICA (Gemini 2.5 Pro Batch API -50%): pre-genera 36.000 artefatti didattici offline per 6 corsi. Costo per corso intero: €148. Ammortizzato su 2.000 studenti: €0.07/studente. Batch API dimezza i costi rispetto al runtime.
- Strato 2 — IL BIBLIOTECARIO (Gemini 2.0 Flash + doppio caching): 77% interazioni. Context Caching -90% input + Semantic Cache -40% chiamate. Costo: €0.81/studente/anno (da €6.40 senza caching = riduzione 87%).
- Strato 3 — L'ASSISTENTE SENIOR (Gemini 3 Flash): 15% interazioni, escalation media. €1.88/studente/anno. Introdotto Rev 2.0 come buffer tra Bibliotecario e Professore: gap 20x rimosso.
- Strato 4 — IL PROFESSORE (Gemini 3 Pro + context caching): 8% interazioni, solo reasoning genuino e cross-concept. €4.56/studente/anno.
COGS Rev 2.0 totale/studente/anno: Ingestione €5.00 + Storage €6.50 + Fabbrica €0.07 + Inferenza €7.25 + Infra €1.80 = €20.62. Margine lordo 79% su prezzo €99.99.
Architettura attuale (senza OIOD): COGS €40, margine 60%. Con Rev 1.0: COGS €27.10, margine 73%. Miglioramento Rev 2.0: -48% COGS, +19pp margine.
Learning Loop: a regime (mese 12+) il COGS inferenza scende a €3.60/studente grazie alla promozione delle risposte migliori ad artefatti. COGS totale converge verso €14-16, margine 84-86%.
Proiezione 5 anni: 2026 €20.62 (79%), 2027 €16 (84%), 2028 €12 (88%), 2029 €9 (91%), 2030 €7 (93%) su 100.000 studenti.
Resilienza: anche con +100% costi LLM, margine rimane al 72% (vs 34% senza OIOD). Struttura 85% fissa + 15% variabile.
Pilot CEPO Multiversity (200 studenti): €75 una tantum (Fabbrica) + €15-30/mese overflow = ~€165 per 3 mesi. Free tier Google AI Studio copre Bibliotecario + Assistente Senior senza costi.
Pilot 2.000 studenti (piano completo): budget totale €85.513 — di cui 87% (€74.588) è team già in organico. Costi incrementali vivi: solo €5.205. Cowork + Claude Code riducono lo sviluppo del 67%: da 750h a 245h, risparmiando €17.956 (mancata assunzione).

## MERCATI E RICAVI — Target, LTV e Modello Forever
Mercato primario: 11 atenei telematici italiani riconosciuti MUR, 322.000 studenti totali. 3 Multiversity (CVC Capital: Pegaso, Mercatorum, San Raffaele) + 8 indipendenti. I più grandi: eCampus ~80.000, Niccolò Cusano ~30.000, Uninettuno ~18.000. Target Anno 1: Uninettuno (max ANVUR) + eCampus. Problema comune: drop-out 40%, tutoring umano insostenibile, pressione AI Act.
Modello B2B2C: Synthetic Data vende licenza SaaS all'ateneo → studente riceve QWIKKEN a €99.99/anno. Seed €300K, MVP pronto M6, primo contratto M5, 1.500 studenti M9, break-even M12 a 3.040 studenti attivi.
LTV per scenario:
- Education Only (3 anni, churn 10%): LTV €245
- Education + Early Career (8 anni, churn 8%): LTV €580
- Full Lifelong (20+ anni, churn 5%): LTV €1.200+
- Premium Lifelong + K-Store (25+ anni, ARPU €149 + Acceleratori, churn 3%): LTV €2.500+
QWIKKEN IS FOREVER: visione Lifelong Learning 45+ anni — Università (19-25) → Early Career (25-35) → Mid Career (35-50) → Senior/Executive (50-65) → Active Aging (65+). Il Cognitive Twin non si "laurea" mai: il Knowledge Graph personale cresce, si raffina e si "pota" nel tempo come asset cumulativo irriproducibile.
La PKL (Personal Knowledge Library) non è statica: rete proattiva che acquisisce Acceleratori Cognitivi dal K-Store e li proietta sul profilo cognitivo unico dell'utente (livelli L1-L4). Traccia non solo cosa hai studiato ma come lo capisci: il moat inattaccabile.
Data Moat: nessun competitor può replicare 10+ anni di profilo cognitivo personale. Switching cost crescente (lock-in positivo: investimento che cresce). Churn -40% rispetto a competitor per personalizzazione irraggiungibile.
Valuation scenario Lifelong + K-Store: LTV medio €1.200-1.800 (+5-7x vs €245 base), revenue multiple 12-18x ARR, Valuation Anno 5 €70-120M (vs €30-50M scenario base Education Only).
Comparable: Duolingo LTV €150-300 (15-20x), LinkedIn Premium LTV €500-1.000 (10-15x), Coursera LTV €200-500 (8-12x), QWIKKEN target LTV €1.200-1.800 (12-18x) con deep personalization + Knowledge Graph integrato.
Scenario commerciale post-pilot: 5.000 studenti (€500K, 79%), 15.000 studenti (€1.5M, 84%), 45.000 studenti (€4.5M, 88%).

## PIANO REALIZZAZIONE — Anno 1 (2026) e Stack Tecnologico
Budget seed: €300.000 (Gennaio 2026). Team 5 FTE: CEO/Founder €60K, CTO/Tech Lead €55K, Full Stack Dev €45K, ML/AI Engineer €50K, Product/CS €40K.
4 fasi Anno 1:
- FASE 1 Foundation (M1-M3): recruiting team, setup infra GCP, pipeline 3 università, LOI firmata M3, contratto M5.
- FASE 2 Build (M3-M6): SENSORIUM MVP (ingestione/parsing documenti → Knowledge Graph), SYNAPSE base (grafo queryable), SOCRATES v1 (conversazione maieutica), LMS connector SSO + grade sync. Demo completa M6.
- FASE 3 Pilot (M7-M9): deploy produzione, coorte 500 → 1.500 studenti, NPS >30, ARENA v1 (simulazione esame con previsione voto).
- FASE 4 Scale (M10-M12): 8.000 studenti attivi, break-even EBITDA mensile, pipeline 3 università Anno 2.
Stack tecnico: Google Cloud Run (auto-scaling, 1-10 istanze), Cloud SQL PostgreSQL + pgvector (semantic search), Memorystore Redis (context cache), Cloud Storage (artefatti JSON + documenti), Firebase Auth (SSO, gratis <50K utenti). Architettura OIOD 4-strati.
MMS Kernel (EGEMON): orchestra LLM come commodity intercambiabile. Pipeline deterministica: CORTEX (intent translation) → Router 4-strati → Retriever (Fabbrica/pgvector) → Generator (LLM strato corretto) → Validator (SENTINEL).
Il Genoma 5 livelli: Governance (policy etiche, limiti), Domain (competenze disciplinari), User (profilo DCA studente), Contractual (vincoli legali ateneo), IP (regole proprietà). Configurabile senza codice via genome.yaml.
12 moduli già operativi (QWIKKEN BASE Rev 5.0): DOC (Syllabus), Lecture Weaver, Web Scout, Tutor, Socrates AI, Nexus Graph, Test Quiz, Simulazione Esame, Life Planner, Tesi, Linguistic Gym, Panic Mode. Non è MVP né PowerPoint: è online.
SENTINEL: governance XAI, audit trail immutabile, compliance AI Act EU Art.13 trasparenza. Genesis Certificate anti-ghostwriting.
Moduli OIOD attivi nel pilot: DOC (P0), Tutor (P0), Socrates AI (P0), Quiz (P0), Simulazione Esame (P1), Life Planner (P2), Nexus Graph (P2).

## PROPRIETÀ INTELLETTUALE — Framework IP Tridimensionale
Principio fondante: Sovereignty by Architecture. La protezione IP è architettonica, non contrattuale. Le violazioni sono impossibili, non solo punibili.
3 assi della tassonomia IP:
- Asse 1 Personal vs Corporate: PS-IP (Personal Sovereign IP = "Il Metodo") appartiene all'individuo — algoritmi decisionali, stili leadership, framework analisi, soft skills codificate, network. È portabile, accumulabile, difendibile. CS-IP (Corporate Sovereign IP = "Il Merito") appartiene all'azienda — dati clienti, bilanci, segreti industriali, best practices collettive. È territoriale, contestuale, collettiva. Metafora: il falegname porta i propri attrezzi (PS-IP) ma lascia il mobile costruito e il legno (CS-IP).
- Asse 2 Author vs Client (Marketplace): Author Sovereign IP = "DNA della Capsula" — prompt di sistema, alberi decisionali, euristiche. Protetto da Black Box Execution: il cliente vede input/output, non il codice. Client Sovereign IP = "Carburante e Risultato" — input (dati ERP, bilanci) + Synthesized IP (piani strategici, report generati). Il cliente paga per il risultato → possiede il risultato. Report già generati restano di proprietà dell'azienda anche se l'abbonamento scade.
- Asse 3 Evolutionary IP (la Zona Grigia): chi possiede l'euristica emergente dall'uso su 50 aziende? (es. "rinegoziare pagamenti a 60gg in tempi di inflazione" scoperta dall'uso del Virtual CFO). Questione architettuale, non legale.
Genesis Certificate: firma digitale immutabile che certifica data, fonti usate, versione modello LLM, proporzione AI vs contributo umano. ANVUR-ready, Garante Privacy-ready, AI Act EU compliant.
Contractual Genome: il Genoma funziona come documento contrattuale dinamico — le policy etiche si aggiornano centralmente e si propagano a tutti i tenant istantaneamente.
IP Silos di Intelligence: dati di ogni ateneo/studente completamente segregati. Ogni elaborazione originale dell'utente diventa Asset Proprietario protetto e non usabile per training di modelli esterni.

## SCALABILITÀ — One Engine, Many Genomes
Principio architetturale: separazione totale tra MMS Kernel (codice sorgente unico centralizzato) e Genoma (configurazione per tenant). Una patch sicurezza al Kernel beneficia automaticamente tutti i tenant. Un nuovo vertical richiede solo la definizione del genome.yaml, zero sviluppo software.
Container segregati per tenant: separazione a livello infrastrutturale, non solo applicativo. Anche un bug nel codice non può causare data leak tra tenant — i container sono fisicamente separati.
genome.yaml: definisce tutti e 5 i livelli del Genoma (Governance, Domain, User, Contractual, IP). Personalizzazione completa senza accesso al codice sorgente. Un partner di canale può creare nuovi verticali autonomamente.
Cross-Industry: stessa piattaforma tecnologica per settori radicalmente diversi. Education → Credit → Legal → Healthcare → Finance → Manufacturing. Un ospedale usa il Twin per diagnosi, una banca per rischio creditizio, un'industria per supply chain: tutti con lo stesso Kernel, Genomi diversi.
L'Azienda Aumentata: con Capsule Gestionali (Virtual C-Suite), la PMI diventa organismo autocorrettivo. Virtual CFO (cash flow alert proattivi: "Se paghi oggi, vai in rosso tra 14 giorni"), Virtual COO (lean management, colli di bottiglia), Virtual CMO, Virtual Compliance Officer (Bilancio di Sostenibilità GRI). PMI da 50 dipendenti con processi da multinazionale — il divario competitivo basato sulle risorse manageriali si riduce.
Rilevamento automatico inefficienze: il Twin non aspetta la domanda giusta ma cerca attivamente pattern anomali (margini in calo, costi in crescita, ritardi ricorrenti). Alert proattivi con insight actionable.
Stack infra scalabile: Google Cloud Run (auto-scaling 1→1000 istanze), PostgreSQL + pgvector, Redis Memorystore, Firebase Auth (free tier fino a 50K utenti). Upgrade infra da €150/mese (pilot) a pagato per produzione.

## WHY US — 8 Pilastri del Vantaggio Competitivo
1. Non siamo un wrapper su LLM: siamo un Sistema Operativo Cognitivo (MMS). L'LLM è commodity intercambiabile (Gemini → Claude → Llama con fallback automatico). Allucinazioni competitor 15-20% vs QWIKKEN quasi zero grazie all'Axiomatic Kernel su contenuti verificati.
2. Il prodotto esiste: QWIKKEN BASE Rev 5.0 online con 12 moduli operativi. Non PowerPoint, non mockup. Il pilot 2.000 studenti è un progetto di scalatura, non di costruzione.
3. Struttura costi SaaS, non da startup AI: COGS €20.62 vs competitor €40-60. Margine 79% vs competitor 30-50%. Struttura 85% fissa — i costi marginali tendono a zero con la Fabbrica.
4. La maieutica è ingegnerizzata: SOCRATES non è un "prompt clever" ma sistema bipartito con DCA 4 livelli (L1-L4), alberi socratici pre-generati con branching adattivo, feedback calibrato per distrattore, Learning Loop.
5. Conosciamo il mercato dall'interno: 11 atenei, 322.000 studenti, 3 stakeholder con dolori specifici. Rettore: drop-out 40% + compliance AI Act. Docente: sovraccarico + dual-use (didattica + consulenza). Studente: solitudine + ansia pre-esame.
6. Compliance by design: AI Act EU 2024/1689 (educazione = rischio limitato con requisiti specifici), XAI Logs esportabili ANVUR, SENTINEL anti-ghostwriting certificato, GDPR Tenant Isolation, Row-Level Security. Non by retrofit.
7. 5 FTE = 9 output: Cowork + Claude Code come moltiplicatori di forza sistematici. -67% ore sviluppo. Risparmio netto €17.956 vs assunzione aggiuntiva. Claude Max (Cowork) si ripaga 8x.
8. 5 Moat strutturali: Technology (MMS+Genoma brevettabile, non replicabile), Data (Twin cognitivo 10+ anni irriproducibile), Network (flywheel Knowledge Graph), Integration (switching cost LMS/SSO crescente), Trust (GDPR+AI Act EU nativi).
Perché Ora: AI Act EU 2026 obbligo compliance → gli atenei cercano attivamente fornitori compliance-ready. Mercato Education AI $20B entro 2030. Finestra ante-consolidation 18-24 mesi. Unicorn italiana first-mover.
`;

  async function sendMsg() {
    const text = aiTextarea.value.trim();
    if (!text) return;
    const key = getApiKey();
    if (!key) return;

    aiTextarea.value = '';
    aiSendBtn.style.display = 'none';
    aiStopBtn.style.display = 'flex';

    appendMsg('user', fmt(text));
    chatHistory.push({ role: 'user', content: text });

    // Create the assistant bubble immediately with typing dots
    aiEmpty.style.display = 'none';
    const wrap = document.createElement('div');
    wrap.className = 'ai-msg assistant';
    const av = document.createElement('div');
    av.className = 'ai-msg-avatar';
    av.innerHTML = '<i class="fa-solid fa-robot"></i>';
    const bbl = document.createElement('div');
    bbl.className = 'ai-msg-bubble ai-typing-bubble';
    bbl.innerHTML = '<span></span><span></span><span></span>';
    wrap.appendChild(av);
    wrap.appendChild(bbl);
    aiMessages.appendChild(wrap);
    aiMessages.scrollTop = aiMessages.scrollHeight;

    abortCtrl = new AbortController();
    let fullText = '';

    try {
      const resp = await fetch('https://openrouter.ai/api/v1/chat/completions', {
        method: 'POST',
        signal: abortCtrl.signal,
        headers: {
          'Authorization': `Bearer ${key}`,
          'Content-Type': 'application/json',
          'HTTP-Referer': 'https://qwikken.io',
          'X-Title': 'QWIKKEN Project Overview',
        },
        body: JSON.stringify({
          model: aiModelSel.value,
          stream: true,
          messages: [
            {
              role: 'system',
              content: `Sei l'assistente AI ufficiale di QWIKKEN (Synthetic Data S.r.l.). Rispondi in modo preciso, professionale e conciso basandoti ESCLUSIVAMENTE sulla documentazione fornita. Se la risposta non è nella documentazione, dichiaralo. Usa il grassetto per i concetti chiave. Rispondi sempre in italiano.\n\n---\n${DOCS_CONTEXT}\n---`
            },
            ...chatHistory
          ],
          max_tokens: 900,
          temperature: 0.3,
        })
      });

      if (!resp.ok) {
        let err = `Errore HTTP ${resp.status}`;
        try { const e = await resp.json(); err = e.error?.message || err; } catch {}
        if (resp.status === 401) err = 'API Key non valida. Clicca 🔑 per aggiornarla.';
        bbl.className = 'ai-msg-bubble';
        bbl.innerHTML = err;
        return;
      }

      // Stream: read SSE chunks
      const reader = resp.body.getReader();
      const decoder = new TextDecoder();
      let buffer = '';
      bbl.className = 'ai-msg-bubble';
      bbl.innerHTML = '';

      while (true) {
        const { done, value } = await reader.read();
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        const lines = buffer.split('\n');
        buffer = lines.pop(); // keep incomplete line
        for (const line of lines) {
          const trimmed = line.trim();
          if (!trimmed || trimmed === 'data: [DONE]') continue;
          if (trimmed.startsWith('data: ')) {
            try {
              const parsed = JSON.parse(trimmed.slice(6));
              const delta = parsed.choices?.[0]?.delta?.content || '';
              if (delta) {
                fullText += delta;
                bbl.innerHTML = renderMarkdown(fullText);
                aiMessages.scrollTop = aiMessages.scrollHeight;
              }
            } catch {}
          }
        }
      }

      // Finalize: add copy button and save to history
      if (fullText) {
        chatHistory.push({ role: 'assistant', content: fullText });
        const cpBtn = document.createElement('button');
        cpBtn.className = 'msg-copy-btn';
        cpBtn.innerHTML = '<i class="fa-regular fa-copy"></i> Copia';
        cpBtn.addEventListener('click', e => { e.stopPropagation(); copyText(fullText, cpBtn); });
        bbl.appendChild(cpBtn);
      }

    } catch (err) {
      if (err.name === 'AbortError') {
        if (fullText) {
          bbl.innerHTML = renderMarkdown(fullText) + '<em style="display:block;margin-top:8px;color:#475569;font-size:11px">— Interrotto —</em>';
          chatHistory.push({ role: 'assistant', content: fullText });
        } else {
          bbl.className = 'ai-msg-bubble';
          bbl.innerHTML = '<em style="color:#475569">— Generazione interrotta —</em>';
        }
      } else {
        bbl.className = 'ai-msg-bubble';
        bbl.innerHTML = `<strong>Errore connessione:</strong> ${err.message}`;
      }
    } finally {
      abortCtrl = null;
      aiStopBtn.style.display = 'none';
      aiSendBtn.style.display = 'flex';
      aiTextarea.focus();
    }
  }
</script>

</body>
</html>
